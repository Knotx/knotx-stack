global.handler.fragmentsHandler.config {
  tasks {
    pdp-task {
      builder {
        name =   template
      }
      config {
        actions = [ "@pdp" ]
        onTransitions {
          _success {
            action = te-hbs
          }
        }
      }
    }
  }

  actions {
    book {
      factory = http
      config {
        endpointOptions {
          path = "/service/mock/book-{extra.id}.json"
          domain = localhost
          port = ${test.wiremock.mockService.port}
          allowedRequestHeaders = ["Content-Type"]
        }
      }
    }
    author {
      factory = http
      config {
        endpointOptions {
          path = "/service/mock/author-{extra.id}.json"
          domain = localhost
          port = ${test.wiremock.mockService.port}
          allowedRequestHeaders = ["Content-Type"]
        }
      }
    }
    te-hbs {
      factory = knot
      config {
        address = knotx.knot.te.handlebars
        deliveryOptions {
          sendTimeout = 3000
        }
      }
    }
  }
}