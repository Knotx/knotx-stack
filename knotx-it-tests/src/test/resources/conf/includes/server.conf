# Configuraiton of HTTP server
serverOptions {
  # Knot.x server HTTP port
  port = ${global.serverPort}

  # If you want a server to serve SSL connections you can configure it here
  #
  # Enable SSL
  # ssl = true
  #
  # Path on the server the keystore.jks file is located
  # keyStoreOptions.path =
  #
  # Keystore password
  # keyStoreOptions.password =
}

# List of HTTP response headers Knot.x can return to the client
allowedResponseHeaders = [
  Access-Control-Allow-Origin
  Content-Type
  Content-Length
]

# Statically defined HTTP response header returned to the client in every HTTP response
customResponseHeader {
  name = X-Server
  value = Knot.x-Custom-Header
}

# Configuration of a default flow - aka Templating mode
defaultFlow {
  repositories = [
    {
      path = "/content/local/.*"
      address = ${global.repositories.fsRepo.address}
    },
    {
      path = "/content/.*"
      address = ${global.repositories.httpRepo.address}
    }
  ]
  routing.GET.items = [
    {
      path = ".*\\.html"
      address = ${global.forms.address}
      onTransition.next {
        address = ${global.bridge.address}
        onTransition.next {
          address = ${global.templateEngine.address}
        }
      }
    }
  ]
  routing.POST.items = [
    {
      path = ".*\\.html"
      address = ${global.forms.address}
      onTransition.next {
        address = ${global.bridge.address}
        onTransition.next {
          address = ${global.templateEngine.address}
        }
      }
    }
  ]
}

displayExceptionDetails = true
dropRequests = false
